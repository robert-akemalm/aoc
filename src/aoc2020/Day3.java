package aoc2020;

public class Day3 {
    public static void main(String[] args) {
//        String input = TEST_INPUT;
        String input = INPUT;
        a(input);
        b(input);
    }

    private static void b(String input) {
        String[] lines = input.lines().toArray(String[]::new);
        boolean[][] map = new boolean[lines.length][];
        for (int i = 0; i < lines.length; i++) {
            map[i] = new boolean[lines[i].length()];
            for (int j = 0; j < lines[i].length(); j++) {
                map[i][j] = lines[i].charAt(j) == '#';
            }
        }

        int[] xs = {1, 3, 5, 7, 1};
        int[] ys = {1, 1, 1, 1, 2};
        long res =1;
        for (int i = 0; i < xs.length; i++) {
            int x = 0;
            int y = 0;
            int trees = 0;
            while (y < lines.length){
                if (map[y][x]) {
                    trees++;
                }
                x = (x + xs[i]) % lines[y].length();
                y+=ys[i];
            }
            res *= trees;
            System.out.println(trees);
        }
        System.out.println(res);
    }

    private static void a(String input) {
        String[] lines = input.lines().toArray(String[]::new);
        boolean[][] map = new boolean[lines.length][];
        for (int i = 0; i < lines.length; i++) {
            map[i] = new boolean[lines[i].length()];
            for (int j = 0; j < lines[i].length(); j++) {
                map[i][j] = lines[i].charAt(j) == '#';
            }
        }

        int x = 0;
        int y = 0;
        int trees = 0;
        while (y < lines.length){
            if (map[y][x]) {
                trees++;
            }
            x = (x + 3) % lines[y].length();
            y++;
        }
        System.out.println(trees);
    }

    private static final String TEST_INPUT = "..##.......\n"
                                             + "#...#...#..\n"
                                             + ".#....#..#.\n"
                                             + "..#.#...#.#\n"
                                             + ".#...##..#.\n"
                                             + "..#.##.....\n"
                                             + ".#.#.#....#\n"
                                             + ".#........#\n"
                                             + "#.##...#...\n"
                                             + "#...##....#\n"
                                             + ".#..#...#.#";

    private static final String INPUT = "....#.#..#.#.#.#......#....##.#\n"
                                        + "..##..#.#..#.##.....#.....#....\n"
                                        + "....#..#...#..#..####.##.#.##..\n"
                                        + "...............#.....##..##..#.\n"
                                        + "##...####..##.#..#...####...#.#\n"
                                        + "..#.#....##....##.........#...#\n"
                                        + ".#..#.##..............#.....###\n"
                                        + "##..##..#.....#..#...#....#....\n"
                                        + ".#.........#..#...#.#.#.....#..\n"
                                        + "......#...#..#.##..#.....#.#...\n"
                                        + ".#...#.#.#.##.##.....###...#...\n"
                                        + "..........#.......#...#....#..#\n"
                                        + ".....##..#.#...#...##.##.......\n"
                                        + "...#.###.#.#..##...#.#.........\n"
                                        + "###.###....#...###.#.##...#....\n"
                                        + "...........#....#.....##....###\n"
                                        + "#..#.......#.....#.....##....#.\n"
                                        + ".##.#....#...#....#......#..##.\n"
                                        + "..#....#..#..#......#..........\n"
                                        + "#..#.........#.#....#.##...#.#.\n"
                                        + "#....#.#.......#.#.#.#.......#.\n"
                                        + ".#....#....#..##.##.#....#.#...\n"
                                        + "............#....#.#.#........#\n"
                                        + "#..#..#.....#....#.##.##.#....#\n"
                                        + "....#......#..##..#....#...#...\n"
                                        + ".............#.##....####...##.\n"
                                        + "#.##..##..##.#.....#...........\n"
                                        + "#.#...#......####.##..#.#......\n"
                                        + ".......#.#..#...#.#.###.......#\n"
                                        + "#..#..........#...#....#.......\n"
                                        + "###...#.....#....#...#..#...#..\n"
                                        + "...##..#.#.....#..#..#...#.#.##\n"
                                        + "#.......#......##...##......#..\n"
                                        + ".....#..#.....#......#.....##..\n"
                                        + "..#.....###......#.#..###....#.\n"
                                        + "....##........#...##.#..#..#...\n"
                                        + "#...#.##...##..#####...##..##..\n"
                                        + "...#.#.#.#.....#.#.........##..\n"
                                        + ".............#......#..##...#..\n"
                                        + ".#..#...##....#......#......#..\n"
                                        + "#.....#...##......#............\n"
                                        + ".#.#....##.#.#..##..#####..##..\n"
                                        + "..#..#.....#..#.##..#.#......##\n"
                                        + ".......#...#...#..#..##.#..##..\n"
                                        + "...#.##....#....#..#..#..#.....\n"
                                        + ".....#......#.....#.....#..#.#.\n"
                                        + "..........#####.#..#....##...##\n"
                                        + "....#...#...#....#.......#.....\n"
                                        + "#.......#........#.##.####..###\n"
                                        + ".#........#...##...#.....#....#\n"
                                        + "...#.............#........#.#.#\n"
                                        + "..##........#..##..##.##...#.#.\n"
                                        + "......##......#####.........##.\n"
                                        + "...##.....#.#.##....#####......\n"
                                        + ".#.#........####.......#.#....#\n"
                                        + ".....#..#.#.#.......##...#...#.\n"
                                        + ".....####.#...#.#..#...#..#...#\n"
                                        + "#..#.....#...#..#..#.#....#..#.\n"
                                        + ".....#.......#..#.##..#.#.....#\n"
                                        + ".......#..##..###......#.......\n"
                                        + ".......##.#.##..##.#.###...##..\n"
                                        + "..#.....#.....#....##.##.#..#.#\n"
                                        + "###.#...#..##..#....#.#.#..#.#.\n"
                                        + "#...#.#.........##........#....\n"
                                        + "#...#.#..###.....###..##.......\n"
                                        + ".....##..#.#...#.....#....#...#\n"
                                        + "##...##..#.#.#..#.#.##..#....##\n"
                                        + ".#.......#.#.........#.##..#...\n"
                                        + "....##.#............###.#...##.\n"
                                        + "#.....##.###.#..#....##.....#..\n"
                                        + "....#.#......##.####....#....#.\n"
                                        + ".....#......##.#...#....##.#...\n"
                                        + "##...#.............#...#.......\n"
                                        + "..#..#......#.#..#..#.....###..\n"
                                        + "....#...#.#...#...#.....#..###.\n"
                                        + ".....#.......#....#...#...#...#\n"
                                        + "..####......#.#..###...........\n"
                                        + "..........#....###.#.#.....###.\n"
                                        + "#.............#...#..#.###.#..#\n"
                                        + ".......#...#.#.#.#...##...#..#.\n"
                                        + "...#.#..#..#...###.#.#.........\n"
                                        + "#.###.#..#...#..#....#..#.#....\n"
                                        + "...#.#.##..#...#.#......###.##.\n"
                                        + ".##..#..##..#.....##.##....#.##\n"
                                        + "..##.........####..............\n"
                                        + ".#.#..###...#.........#...##.#.\n"
                                        + "....##.........#.........##...#\n"
                                        + "...#.#.......#..#...###.#.##.#.\n"
                                        + "..#....###......#.##...........\n"
                                        + ".......#...#.....#.#..#.#...#..\n"
                                        + ".##..#...#..#...#..#...#.#..##.\n"
                                        + ".##...#..##..##.#.#...##.......\n"
                                        + ".#.##.#...#..#..#..........#.#.\n"
                                        + "#.#.#...#......##...##..##.....\n"
                                        + ".##..#............#.##....#.#..\n"
                                        + ".##.........##..#.....#...#...#\n"
                                        + "##.#.#.#.#...#.....##....##.#..\n"
                                        + "#..##......#..##.........#.#...\n"
                                        + "...#....#.#.#.##.....##........\n"
                                        + "...#...#...#.##.#.#.#..#..#....\n"
                                        + ".......#..#.......##...#....##.\n"
                                        + "#.....#.#......#.......#.##.#.#\n"
                                        + ".##..#.....#.....#.#####.#....#\n"
                                        + "......#.#....#..............##.\n"
                                        + "##..#...........#.#.#.......#..\n"
                                        + "..##...###...#.#.........#....#\n"
                                        + "..##..#.#....##.....#.#.......#\n"
                                        + "....###...#.###....###.......#.\n"
                                        + "..#.#.....#..#..#...........##.\n"
                                        + ".###..#.#........#..#.....##.#.\n"
                                        + "#.##........###.#..#.....#....#\n"
                                        + ".#.#.....#.#.#..#...##.#...#...\n"
                                        + "#.#.#...#.#........#..##..##...\n"
                                        + "..#.##....###.#.......#.#.#....\n"
                                        + ".....#...##...................#\n"
                                        + "#..####.....###.#..........#...\n"
                                        + "#.##.........###.#........#..#.\n"
                                        + "..##........#.......#..###..#.#\n"
                                        + "##..##..#.#..#..#.....#.#..#...\n"
                                        + "....#......#....#...#.#.#..##.#\n"
                                        + ".##....#.##.#.#..###..#......##\n"
                                        + "###....###.##....##......###..#\n"
                                        + ".##....#..###..##..#.###...##..\n"
                                        + ".#.......##..##.............##.\n"
                                        + ".###..#.....#.....#.#.#..#...##\n"
                                        + "......##.###.#........#..#.....\n"
                                        + "#####.....##.#.#...#...#.#.#...\n"
                                        + "##..##.####...##....#...#.#...#\n"
                                        + ".#.##...#...#..#...............\n"
                                        + "##.##.#..#........#...#........\n"
                                        + "..#.##.#....#...#.#.###..#....#\n"
                                        + ".......#.#..#.....##.#.#...#.#.\n"
                                        + "..#.##...#...#......#...#.#.#..\n"
                                        + ".##.......##......#.....#......\n"
                                        + ".#....................#.#...###\n"
                                        + "..#.....#..##.#......##..#....#\n"
                                        + ".....#.#...#...........#.#...##\n"
                                        + "...#..#....#.#..#.......#..#..#\n"
                                        + ".#..#.#...#.#.#.....###........\n"
                                        + ".#.#.....#..#.##..#.#..##......\n"
                                        + "..##..#..#.....###.##..#.....##\n"
                                        + ".#..#.#...#.....#..#......##.#.\n"
                                        + ".##.##.#.#.#.#.#...###..##...#.\n"
                                        + "......#.##.#..#.##.#...#.#..#.#\n"
                                        + "..#.....#.##....#......#..#....\n"
                                        + ".#.....#..###.............#...#\n"
                                        + ".#.....#...#...#.#.#.#..#.#....\n"
                                        + ".#.....#......##.....#...#.#..#\n"
                                        + ".#.#......##...#......#......#.\n"
                                        + "##....#...#..##.#...#..#.......\n"
                                        + "....#.#......#.##...#.........#\n"
                                        + "#.#.##.#..#......#....#.......#\n"
                                        + ".#..#.##..#..#........#.#...#..\n"
                                        + "..#..#.#.#...#....#...#..#..###\n"
                                        + "....#....#..#......#..........#\n"
                                        + "#.....#.......#..#....#.#.#..#.\n"
                                        + "....#.#..###.#.....#.####......\n"
                                        + "##.#.#....##.#.#........#..#..#\n"
                                        + "#.#...#...#.#...##..#.#..#.#...\n"
                                        + "##.#......###.##.......#..#....\n"
                                        + "#..#...#.......##....#.###.....\n"
                                        + ".####.##....#..#..####.#....#.#\n"
                                        + "#...#.#..#.....................\n"
                                        + "..###..#...##.....##...........\n"
                                        + "..#....#...###.#.........##.##.\n"
                                        + "......#.....#....#.#....##...##\n"
                                        + "#..#.....#...#..##.....#....#.#\n"
                                        + "..#.#..#....##...###.#..##....#\n"
                                        + "#....#..#..#..#.##.##.....#...#\n"
                                        + "......#.#..#..##.#.....#.#..###\n"
                                        + ".....##...##..#...##..#...#....\n"
                                        + "##....#...#..#...##..#...###..#\n"
                                        + ".##.####..#......#.#..#.##....#\n"
                                        + "..###........###..#....##.#....\n"
                                        + "...#.....##...##..##..##..#....\n"
                                        + ".#..#.#..##..#..#..##.....#...#\n"
                                        + "##.#..##...#..#...........##...\n"
                                        + "....#..#..###.....#....#..#..##\n"
                                        + "......##..#....##........#.#.##\n"
                                        + ".#.##....##.#......#..##..#..##\n"
                                        + ".....##.#..#.#.##.##.##..#...#.\n"
                                        + ".#..##.#.....#####...#.........\n"
                                        + "....#....#...#..##.#.#..##...#.\n"
                                        + "...#..#...#............#..#....\n"
                                        + "....#.#.#.##....##.###..#.#....\n"
                                        + ".........#...###.........#..#.#\n"
                                        + "...........#...##.#..#.#.#..#..\n"
                                        + "#..#.###..#.#..#..##.....#....#\n"
                                        + ".#.#....#.#....#...............\n"
                                        + "...#.#..#.#..##.#.#.#.......#..\n"
                                        + ".#......#...#.####......#..#...\n"
                                        + "..##..#.#...#..#.......###.....\n"
                                        + ".#.....#.#..##....##.####.##.#.\n"
                                        + ".............##.#.#.....#..#.#.\n"
                                        + "#.....##.#...#.#.#.######.##...\n"
                                        + ".##...........#..#..##.####....\n"
                                        + "#.#............#....#.........#\n"
                                        + "..#.##.##.#..#....##....#..#.##\n"
                                        + "#...#.##..##.##.#.....##.#....#\n"
                                        + "##.#..##.###..#.#.#..........#.\n"
                                        + "...##...#..#...#.#.#.###.###...\n"
                                        + "#.....##......#...#.#...#......\n"
                                        + "#.#.#.#.#.#...#..#....###...#..\n"
                                        + "...##.#...#.......#..#...##.#..\n"
                                        + "..#..#..##.....#......##...###.\n"
                                        + ".............#.##...#.#.###..#.\n"
                                        + "..#.#.....##..#.##..#...##..#..\n"
                                        + "..#...#.##..###..........#..#..\n"
                                        + "#.##.##...###...........#....#.\n"
                                        + "#.....##...#.#..............#..\n"
                                        + "##..##.....#...#..####.#...##..\n"
                                        + "...........#......##.###..####.\n"
                                        + "#...#..##.##.######.....#.....#\n"
                                        + "#.##.........##.#.#....##...#..\n"
                                        + ".##.#.......###.#.....#.....###\n"
                                        + "###.#.#.#.#.#.##......#..#..#.#\n"
                                        + "....#.###...#....#.##...##.##..\n"
                                        + "....#..#.....#.#.#..#..##.#....\n"
                                        + "....#..#..#.....#.#..##........\n"
                                        + "..........#..##..##......##..#.\n"
                                        + "#...##.......#...##.#...###..#.\n"
                                        + "..#.#.##.....##....#..#.##...#.\n"
                                        + ".#.#.....#.......##.....##...#.\n"
                                        + "#......#.........#.#.........#.\n"
                                        + ".......#...##......#.........#.\n"
                                        + "..##..........#....#..#.......#\n"
                                        + ".......#............#..#.#...#.\n"
                                        + "#..#....#.#..#....##..#........\n"
                                        + "....#..###.##..#.#..#.##..###..\n"
                                        + "....###............##.#....#.#.\n"
                                        + "..#..#.##...#....#..####...#...\n"
                                        + "..#....#...#...##...#.#.#..#...\n"
                                        + "..#.........#.#.......#........\n"
                                        + ".........##.##.#..#.#...#.#..##\n"
                                        + "#.....#.#....##.#####.......##.\n"
                                        + ".#..#....#......#.##..#....#...\n"
                                        + "........#....#...........#...#.\n"
                                        + ".......#......#..........#..##.\n"
                                        + ".###.#......#..#.##..#...#.#...\n"
                                        + ".....#..#..###...........#...#.\n"
                                        + "..#...##....###......#....#....\n"
                                        + "...#.#..#.#.#......#.##.###.#.#\n"
                                        + ".##....#...#..#.#..#........#..\n"
                                        + "......##.###...##.#.#.........#\n"
                                        + ".#...#..####..#.#..##........#.\n"
                                        + "#..#...#..#..#.#...#..##...#..#\n"
                                        + "..###...###....#.#.#.##....#..#\n"
                                        + ".#.#....#.#.#......##....#..#.#\n"
                                        + "##.#.#.####....#........#....#.\n"
                                        + "...#......#........#...........\n"
                                        + "#.#............##......#.##....\n"
                                        + "..##.#...#.....#.#..#.#..#.#.#.\n"
                                        + "#.......##.....##...#.#.#...###\n"
                                        + "............#..#..#....#......#\n"
                                        + ".#.##...###...#...###..#.......\n"
                                        + "...............#....#...#.#.#..\n"
                                        + "#..##..##.###...#..##...#.#.##.\n"
                                        + "..#..#.......#.##......#..#..#.\n"
                                        + "#.....#............#......#...#\n"
                                        + ".###.##......##.#...#.#.##..#..\n"
                                        + ".#..##..#..#..#.............#..\n"
                                        + "#...#...##..##........#........\n"
                                        + "...#........#..###...........#.\n"
                                        + "#.#..#.#...................#.##\n"
                                        + "#...#.#..#.......##...###..#.#.\n"
                                        + "..####......#....#.#....#..#..#\n"
                                        + "....#...........#...#..#.......\n"
                                        + "...#..#....#.#.##...#.#.#.#....\n"
                                        + "#...##.#.##..#.......#.....#...\n"
                                        + ".##....#...#.#....#....#.#...#.\n"
                                        + "##.#...#.#...##..#..##...##..#.\n"
                                        + "#..#.#.........#.......#.......\n"
                                        + ".....##.....#..#......##....#.#\n"
                                        + ".###...##.#.#.#....#....#....#.\n"
                                        + "#.#.#.............#.#..#.......\n"
                                        + "#.......#..............#...#.##\n"
                                        + ".#.#...#....#.........###...#.#\n"
                                        + "..##..###..#...#...#.#....##..#\n"
                                        + ".#..#.#...#..#.....#....#..##..\n"
                                        + "##.......##....#....###..#.#..#\n"
                                        + "#.#.#####..........#.#...##..##\n"
                                        + "......#..#..#...#...##...#....#\n"
                                        + "#..#......#...#...#..###.......\n"
                                        + "...####.....#.......#.#...##.#.\n"
                                        + "......#..#.....##..#...........\n"
                                        + "#........#..#...#.....#...#.#..\n"
                                        + "..#.....#..#......#.#.#.....#..\n"
                                        + "..#.........#..##...#...#...#..\n"
                                        + "##..##......#.........#........\n"
                                        + "..#..#....#.##.#....###.#..#.##\n"
                                        + "..##..#..#.......###....#..#...\n"
                                        + "...#.#...#.....####.#..........\n"
                                        + "........#..#..#.#.....#........\n"
                                        + "...##..........#.#.#.....#..#..\n"
                                        + "..#....#.......#...............\n"
                                        + ".#..#.#.#.##..#..#.....#.......\n"
                                        + "#.##.#.#..#..............#.....\n"
                                        + ".#.#..#.....##..##....##.....#.\n"
                                        + ".##.#..#........##.##...##.....\n"
                                        + "#....##..#............#....#...\n"
                                        + "...............##.#...#..#.....\n"
                                        + "..#..##.##...#.#.....#.........\n"
                                        + ".##..#.#.#.##.....#.#.#..#..##.\n"
                                        + "......#####.#...#..........##..\n"
                                        + "..........##.##...#.....#.#....\n"
                                        + "..##......#..#.###..#...#.##...\n"
                                        + ".#...........#.....#.#........#\n"
                                        + ".#...#................#......#.\n"
                                        + "#...#.#..##.#####..##....#.....\n"
                                        + "...##...##..#.#..........#.....\n"
                                        + "##............#......##..##...#\n"
                                        + "###.#.......#..#...#..#..#...#.\n"
                                        + ".#..##.....###.#.#............#\n"
                                        + "##.###.#.........#.......#.#..#\n"
                                        + "...#..##..#.....#.......#......\n"
                                        + "......#.#..#.....##..#..##.....\n"
                                        + "...#........##..###.#....#..#..\n"
                                        + "..#...##.##....#.##..###......#\n"
                                        + "..#...#.....#.####.....#...#.##\n"
                                        + "..........##....###..#...#####.\n"
                                        + "....#.#.#.#.#.##.............##\n"
                                        + ".#.#.#.##......#......#....#.#.\n"
                                        + ".##...##....#...#....#..###.#.#";
}
